generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://neondb_owner:npg_obN9i3qtGMDC@ep-late-queen-a42gptt6-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"
//   url      = "postgresql://neondb_owner:s6XCtxD5AFao@ep-shiny-breeze-a547jrj4.us-east-2.aws.neon.tech/neondb?sslmode=require"   
}

model User {
   id           String  @id @default(uuid()) @map("_id")
   name       String @unique
   email String
   phone  String
   password String
   home_id  String
   pushToken String @default("")
   home Home @relation(references: [id], fields: [home_id])
   // office_id  String
   // office Office @relation(references: [id], fields: [office_id])
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
}

model Home {
   id           String  @id @default(uuid()) @map("_id")
   name  String
   address String
   is_active Boolean @default(false)
   users  User[]
   rooms  Room[]
   danger Danger[]
   notfications Notification[]
   type Type
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
} 
enum Type {
   home
   office
}

model Office {
   id           String  @id @default(uuid()) @map("_id")
   name  String
   address String
   is_active Boolean @default(false)
   // users  User[]
   // rooms  Room[]
   // danger Danger[]
   // notfications Notification[]
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
} 

model Room {
    id           String  @id @default(uuid()) @map("_id")
    name String
    home_id String
    home Home @relation(references: [id], fields: [home_id])
    command Command?
    activities Activity?
    createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
}

model Notification {
  id        String   @id @default(uuid()) @map("_id")
  home_id   String
  home      Home     @relation(references: [id], fields: [home_id])
  message   String
  title     String
  createdAt DateTime @default(now())
  read      Boolean  @default(false)
   office_id  String
   // office Office @relation(references: [id], fields: [office_id])
  updatedAt DateTime @updatedAt
}

model Command {
   id           String  @id @default(uuid()) @map("_id")
   room_id      String  @unique
   room         Room    @relation(references: [id], fields: [room_id])
   masterBathLight String @default("off")
   stove String @default("off")
   oven String @default("off") 
   freezer String @default("off")
   fan String @default("off")
   centerLight String @default("off")
   spotLight String @default("off")
   shadowLight String @default("off")
   diningLight String @default("off")
   colliderLight String @default("off")
   stove1 String @default("off")
   stove2 String @default("off")
   strippeLight String @default("off")
   diningStrippeLight String @default("off")
}

model Activity {
   id           String  @id @default(uuid()) @map("_id")
   room_id      String  @unique
   room         Room    @relation(references: [id], fields: [room_id])
   masterBathLight Boolean @default(false)
   stove Boolean @default(false)
   oven Boolean @default(false) 
   freezer Boolean @default(false)
   fan Boolean @default(false) 
   centerLight Boolean @default(false)
   spotLight Boolean @default(false)
   shadowLight Boolean @default(false)
   diningLight Boolean @default(false)
   colliderLight Boolean @default(false)
   stove1 Boolean @default(false)
   stove2 Boolean @default(false)
   strippeLight Boolean @default(false)
   diningStrippeLight Boolean @default(false)
}

model Danger {
   id           String  @id @default(uuid()) @map("_id")
   home_id      String  @unique
   home         Home    @relation(references: [id], fields: [home_id])
   sound String   @default("on")
   alert String   @default("off")
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
}

